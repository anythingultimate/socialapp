(this["webpackJsonpreact-practice"]=this["webpackJsonpreact-practice"]||[]).push([[0],{10:function(e,t,a){"use strict";var s=a(1),n=a(0),r=function(e){var t=e.wide,a=e.children;return Object(n.jsx)("div",{className:"container py-md-5 "+(t?"":"container--narrow"),children:a})};t.a=function(e){var t=e.title,a=e.wide,c=e.children;return Object(s.useEffect)((function(){document.title="".concat(t," | React Practice"),window.scrollTo(0,0)}),[]),Object(n.jsx)(r,{wide:a,children:c})}},14:function(e,t,a){"use strict";var s=a(0);t.a=function(){return Object(s.jsx)("div",{className:"dots-loading",children:Object(s.jsx)("div",{})})}},15:function(e,t,a){"use strict";var s=a(1),n=Object(s.createContext)();t.a=n},17:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return u})),a.d(t,"b",(function(){return m}));var s=a(11),n=a(0),r=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),Object(n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]}))},c=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),Object(n.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})]}))},o=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Object(n.jsx)("path",{d:"M14.12 10.47L12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9z"})]}))},l=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0H24V24H0z"}),Object(n.jsx)("path",{d:"M3 10h11v2H3v-2zm0-2h11V6H3v2zm0 8h7v-2H3v2zm15.01-3.13l.71-.71a.996.996 0 011.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71-2.12-2.12zm-.71.71l-5.3 5.3V21h2.12l5.3-5.3-2.12-2.12z"})]}))},i=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsxs)("g",{fill:"none",children:[Object(n.jsx)("path",{d:"M0 0H24V24H0z"}),Object(n.jsx)("path",{d:"M0 0H24V24H0z"})]}),Object(n.jsx)("path",{d:"M22 9L22 7 20 7 20 9 18 9 18 11 20 11 20 13 22 13 22 11 24 11 24 9z"}),Object(n.jsx)("path",{d:"M8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM8 13c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4zm6 5H2v-.99C2.2 16.29 5.3 15 8 15s5.8 1.29 6 2v1zM12.51 4.05C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95zM16.53 13.83C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17z"})]}))},u=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0H24V24H0z"}),Object(n.jsx)("path",{d:"M24 9v2h-6V9h6zM8 4C5.79 4 4 5.79 4 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 3c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4zm6 5H2v-.99C2.2 16.29 5.3 15 8 15s5.8 1.29 6 2v1zM12.51 4.05C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95zm4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17z"})]}))},m=function(e){return Object(n.jsxs)("svg",Object(s.a)(Object(s.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(n.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z",opacity:"0.87"}),Object(n.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})]}))}},22:function(e,t,a){"use strict";var s=a(7),n=a(0);t.a=function(e){var t=e.post,a=e.onClick,r=e.noAuthor,c=new Date(t.createdDate),o="".concat(c.getMonth()+1,"/").concat(c.getDate(),"/").concat(c.getFullYear());return Object(n.jsxs)(s.b,{onClick:a,to:"/post/".concat(t._id),className:"list-group-item list-group-item-action",children:[Object(n.jsx)("img",{alt:"avatar",className:"avatar-tiny",src:t.author.avatar})," ",Object(n.jsx)("strong",{children:t.title})," ",Object(n.jsxs)("span",{className:"text-muted small",children:[!r&&Object(n.jsxs)(n.Fragment,{children:["by ",t.author.username]})," on ",o," "]})]})}},23:function(e,t,a){"use strict";var s=a(7),n=a(10),r=a(0);t.a=function(){return Object(r.jsx)(n.a,{title:"Not Found",children:Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h2",{children:"Whoops, we cannot find that page."}),Object(r.jsxs)("p",{className:"lead text-muted",children:["You can always visit the ",Object(r.jsx)(s.b,{to:"/",children:"homepage"})," to get a fresh start."]})]})})}},46:function(e,t,a){},66:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(18),c=a.n(r),o=(a(46),a(4)),l=a.n(o),i=a(8),u=a(6),m=a(16),d=a(7),p=a(3),h=a(5),j=a.n(h),b=a(73),f=(a(66),a(10)),v=a(0),x=function(){return Object(v.jsx)(f.a,{title:"About",wide:!1,children:Object(v.jsx)("div",{children:"About"})})},g=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("footer",{className:"border-top text-center small text-muted py-3",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)(d.b,{to:"/",className:"mx-1",children:"Home"})," ","|"," ",Object(v.jsx)(d.b,{className:"mx-1",to:"/about-us",children:"About Us"})," ","|"," ",Object(v.jsx)(d.b,{className:"mx-1",to:"/terms",children:"Terms"})]}),Object(v.jsxs)("p",{className:"m-0",children:["Copyright \xa9 2021"," ",Object(v.jsx)(d.b,{to:"/",className:"text-muted",children:"SocialApp"}),". All rights reserved."]})]})})},O=a(9),w=a(24),y=a(15),C=a(17),k=function(){var e=Object(s.useContext)(y.a),t=Object(s.useContext)(O.a);return Object(v.jsxs)("div",{className:"flex-row my-3 my-md-0",children:[Object(v.jsx)("a",{href:" #",className:"text-white me-2 header-search-icon bg-transparent",onClick:function(t){t.preventDefault(),e({type:"openSearch"})},"data-for":"search","data-tip":"Search",children:Object(v.jsx)(C.g,{width:30,height:30,fill:"currentColor"})}),Object(v.jsx)(w.a,{place:"bottom",id:"search",className:"custom-tooltip"})," ",Object(v.jsxs)("span",{onClick:function(){return e({type:"toggleChat"})},"data-for":"chat","data-tip":"Chat",className:"mr-2 header-chat-icon "+(t.unreadChatCount?"text-danger":"text-white"),children:[Object(v.jsx)(C.c,{}),t.unreadChatCount?Object(v.jsx)("span",{className:"chat-count-badge text-white",children:t.unreadChatCount<10?t.unreadChatCount:"9+"}):""]}),Object(v.jsx)(w.a,{place:"bottom",id:"chat",className:"custom-tooltip"})," ",Object(v.jsx)(d.b,{"data-for":"profile","data-tip":"My Profile",to:"/profile/".concat(t.user.username),className:"me-2",children:Object(v.jsx)("img",{alt:"avatar",className:"small-header-avatar",src:t.user.avatar})}),Object(v.jsx)(w.a,{place:"bottom",id:"profile",className:"custom-tooltip"})," ",Object(v.jsx)(d.b,{className:"btn btn-sm btn-success me-2",to:"/create-post",children:"Create Post"}),Object(v.jsx)("button",{onClick:function(){e({type:"logout"}),e({type:"flashMessage",value:"You have successfully logged out."})},className:"btn btn-sm btn-secondary",children:"Sign Out"})]})},N=function(){var e=Object(s.useState)(),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(),c=Object(u.a)(r,2),o=c[0],m=c[1],d=Object(s.useContext)(y.a);function p(){return(p=Object(i.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j.a.post("/login",{username:a,password:o});case 4:(s=e.sent).data?(d({type:"login",data:s.data}),d({type:"flashMessage",value:"You have successfully logged in."})):(console.log("Incorrect username / password."),d({type:"flashMessage",value:"Invalid username / password."})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("There was a problem.");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(v.jsx)("form",{onSubmit:function(e){return p.apply(this,arguments)},className:"mb-0 pt-2 pt-md-0",children:Object(v.jsxs)("div",{className:"row align-items-center",children:[Object(v.jsx)("div",{className:"col-md me-0 pe-md-0 mb-3 mb-md-0",children:Object(v.jsx)("input",{onChange:function(e){return n(e.target.value)},name:"username",className:"form-control form-control-sm input-dark",type:"text",placeholder:"Username",autoComplete:"off"})}),Object(v.jsx)("div",{className:"col-md me-0 pe-md-0 mb-3 mb-md-0",children:Object(v.jsx)("input",{onChange:function(e){return m(e.target.value)},name:"password",className:"form-control form-control-sm input-dark",type:"password",placeholder:"Password"})}),Object(v.jsx)("div",{className:"col-md-auto",children:Object(v.jsx)("button",{className:"btn btn-success btn-sm",children:"Sign In"})})]})})},T=function(e){e.loggedIn;var t=Object(s.useContext)(O.a);return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("header",{className:"header-bar bg-primary mb-3",children:Object(v.jsxs)("div",{className:"container d-flex flex-column flex-md-row align-items-center p-3",children:[Object(v.jsx)("h4",{className:"my-0 me-md-auto font-weight-normal",children:Object(v.jsx)("a",{href:"/",className:"text-white",children:"SocialApp"})}),t.loggedIn?Object(v.jsx)(k,{}):Object(v.jsx)(N,{})]})})})},E=function(){var e=Object(s.useContext)(y.a);var t=Object(m.b)((function(e,t){switch(t.type){case"usernameImmediately":return e.username.hasErrors=!1,e.username.value=t.value,e.username.value.length>30&&(e.username.hasErrors=!0,e.username.message="Username cannot exceed 30 characters."),void(e.username.value&&!/^([a-zA-Z0-9]+)$/.test(e.username.value)&&(e.username.hasErrors=!0,e.username.message="Username can only contain letters and numbers."));case"usernameAfterDelay":return e.username.value.length<3&&(e.username.hasErrors=!0,e.username.message="Username must be at least 3 characters."),void(e.hasErrors||t.noRequest||e.username.checkCount++);case"usernameUniqueResults":return void(t.value?(e.username.hasErrors=!0,e.username.isUnique=!1,e.username.message="That username is already taken."):e.username.isUnique=!0);case"emailImmediately":return e.email.hasErrors=!1,void(e.email.value=t.value);case"emailAfterDelay":return/^\S+@\S+$/.test(e.email.value)||(e.email.hasErrors=!0,e.email.message="You must provide a valid email address."),void(e.email.hasErrors||t.noRequest||e.email.checkCount++);case"emailUniqueResults":return void(t.value?(e.email.hasErrors=!0,e.email.isUnique=!1,e.email.message="That email is already being used."):e.email.isUnique=!0);case"passwordImmediately":return e.password.hasErrors=!1,e.password.value=t.value,void(e.password.value.length>50&&(e.password.hasErrors=!0,e.password.message="Password cannot exceed 50 characters."));case"passwordAfterDelay":return void(e.password.value.length<6&&(e.password.hasErrors=!0,e.password.message="Password must be at least 6 characters."));case"submitForm":return void(e.username.hasErrors||!e.username.isUnique||e.email.hasErrors||!e.email.isUnique||e.password.hasErrors||e.submitCount++);default:return}}),{username:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},email:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},password:{value:"",hasErrors:!1,message:""},submitCount:0}),a=Object(u.a)(t,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){if(n.username.value){var e=setTimeout((function(){return r({type:"usernameAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[n.username.value]),Object(s.useEffect)((function(){if(n.email.value){var e=setTimeout((function(){return r({type:"emailAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[n.email.value]),Object(s.useEffect)((function(){if(n.password.value){var e=setTimeout((function(){return r({type:"passwordAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[n.password.value]),Object(s.useEffect)((function(){if(n.username.checkCount){var e=j.a.CancelToken.source();function t(){return(t=Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.post("/doesUsernameExist",{username:n.username.value},{cancelToken:e.token});case 3:a=t.sent,r({type:"usernameUniqueResults",value:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.cancel()}}}),[n.username.checkCount]),Object(s.useEffect)((function(){if(n.email.checkCount){var e=j.a.CancelToken.source();function t(){return(t=Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.post("/doesEmailExist",{email:n.email.value},{cancelToken:e.token});case 3:a=t.sent,r({type:"emailUniqueResults",value:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.cancel()}}}),[n.email.checkCount]),Object(s.useEffect)((function(){if(n.submitCount){var t=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.post("/register",{username:n.username.value,email:n.email.value,password:n.password.value},{cancelToken:t.token});case 3:s=a.sent,e({type:"login",data:s.data}),e({type:"flashMessage",value:"Congrats! Welcome to your new account."}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem or the request was cancelled.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t.cancel()}}}),[n.submitCount]),Object(v.jsx)(f.a,{title:"Welcome!",wide:!0,children:Object(v.jsx)("div",{className:"container py-md-5",children:Object(v.jsxs)("div",{className:"row align-items-center",children:[Object(v.jsxs)("div",{className:"col-lg-7 py-3 py-md-5",children:[Object(v.jsx)("h1",{className:"display-3",children:"Remember Writing?"}),Object(v.jsx)("p",{className:"lead text-muted",children:"Are you sick of short tweets and impersonal \u201cshared\u201d posts that are reminiscent of the late 90\u2019s email forwards? We believe getting back to actually writing is the key to enjoying the internet again."})]}),Object(v.jsx)("div",{className:"col-lg-5 ps-lg-5 pb-3 py-lg-5",children:Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r({type:"usernameImmediately",value:n.username.value}),r({type:"usernameAfterDelay",value:n.username.value,noRequest:!0}),r({type:"emailImmediately",value:n.email.value}),r({type:"emailAfterDelay",value:n.email.value,noRequest:!0}),r({type:"passwordImmediately",value:n.password.value}),r({type:"passwordAfterDelay",value:n.password.value}),r({type:"submitForm"})},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"username-register",className:"text-muted mb-1",children:Object(v.jsx)("small",{children:"Username"})}),Object(v.jsx)("input",{id:"username-register",name:"username",className:"form-control",type:"text",placeholder:"Pick a username",autoComplete:"off",onChange:function(e){return r({type:"usernameImmediately",value:e.target.value})}}),Object(v.jsx)(b.a,{in:n.username.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(v.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:n.username.message})})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"email-register",className:"text-muted mb-1",children:Object(v.jsx)("small",{children:"Email"})}),Object(v.jsx)("input",{onChange:function(e){return r({type:"emailImmediately",value:e.target.value})},id:"email-register",name:"email",className:"form-control",type:"text",placeholder:"you@example.com",autoComplete:"off"}),Object(v.jsx)(b.a,{in:n.email.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(v.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:n.email.message})})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"password-register",className:"text-muted mb-1",children:Object(v.jsx)("small",{children:"Password"})}),Object(v.jsx)("input",{onChange:function(e){return r({type:"passwordImmediately",value:e.target.value})},id:"password-register",name:"password",className:"form-control",type:"password",placeholder:"Create a password"}),Object(v.jsx)(b.a,{in:n.password.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(v.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:n.password.message})})]}),Object(v.jsx)("button",{type:"submit",className:"py-3 mt-4 btn btn-lg btn-success btn-block",children:"Sign up for SocialApp"})]})})]})})})},q=a(14),F=a(22),S=function(){var e=Object(s.useContext)(O.a),t=Object(m.a)({isLoading:!0,feed:[]}),a=Object(u.a)(t,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){var t=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.post("/getHomeFeed",{token:e.user.token},{cancelToken:t.token});case 3:s=a.sent,r((function(e){e.isLoading=!1,e.feed=s.data})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("There was a problem.");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){t.cancel()}}),[]),n.isLoading?Object(v.jsx)(q.a,{}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(f.a,{title:"Your Feed",children:[n.feed.length>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"The Latest From Those You Follow"}),Object(v.jsx)("div",{className:"list-group",children:n.feed.map((function(e){return Object(v.jsx)(F.a,{post:e},e._id)}))})]}),0===n.feed.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h2",{className:"text-center",children:["Hello ",Object(v.jsx)("strong",{children:e.user.username}),", your feed is empty."]}),Object(v.jsx)("p",{className:"lead text-muted text-center",children:"Your feed displays the latest posts from the people you follow. If you don\u2019t have any friends to follow that\u2019s okay; you can use the \u201cSearch\u201d feature in the top menu bar to find content written by people with similar interests and then follow them."})]})]})})},M=function(e){var t=e.messages;return Object(v.jsx)("div",{className:"floating-alerts",children:t.map((function(e,t){return Object(v.jsx)("div",{className:"alert alert-success text-center floating-alert shadow-sm",role:"alert",children:e},t)}))})},z=function(){var e=Object(p.g)().username,t=Object(s.useState)(!0),a=Object(u.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)([]),o=Object(u.a)(c,2),m=o[0],h=o[1],b=Object(s.useContext)(O.a);return Object(s.useEffect)((function(){var t=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.get("/profile/".concat(e,"/posts"),{cancelToken:t.token});case 3:s=a.sent,h(s.data),r(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){t.cancel()}}),[]),n?Object(v.jsx)(q.a,{}):Object(v.jsxs)("div",{className:"list-group",children:[m.length>0&&m.map((function(e){return Object(v.jsx)(F.a,{noAuthor:!0,post:e},e._id)})),0===m.length&&b.user.username===e&&Object(v.jsxs)("p",{className:"lead text-muted text-center",children:["You haven\u2019t created any posts yet;"," ",Object(v.jsx)(d.b,{to:"/create-post",children:"create one now!"})]}),0===m.length&&b.user.username!==e&&Object(v.jsxs)("p",{className:"lead text-muted text-center",children:[e," hasn\u2019t created any posts yet."]})]})},D=function(){var e=Object(s.useContext)(O.a),t=Object(p.g)().username,a=Object(s.useState)(!0),n=Object(u.a)(a,2),r=n[0],c=n[1],o=Object(s.useState)([]),m=Object(u.a)(o,2),h=m[0],b=m[1];return Object(s.useEffect)((function(){var e=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.get("/profile/".concat(t,"/followers"),{cancelToken:e.token});case 3:s=a.sent,b(s.data),c(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.cancel()}}),[t]),r?Object(v.jsx)(q.a,{}):Object(v.jsxs)("div",{className:"list-group",children:[h.length>0&&h.map((function(e,t){return Object(v.jsxs)(d.b,{to:"/profile/".concat(e.username),className:"list-group-item list-group-item-action",children:[Object(v.jsx)("img",{alt:"avatar",className:"avatar-tiny",src:e.avatar})," ",e.username]},t)})),0===h.length&&e.user.username===t&&Object(v.jsx)("p",{className:"lead text-muted text-center",children:"You don\u2019t have any followers yet."}),0===h.length&&e.user.username!==t&&Object(v.jsxs)("p",{className:"lead text-muted text-center",children:[t," doesn\u2019t have any followers yet.",e.loggedIn&&" Be the first to follow them!",!e.loggedIn&&Object(v.jsxs)(v.Fragment,{children:[" ","If you want to follow them you need to ",Object(v.jsx)(d.b,{to:"/",children:"sign up"})," ","for an account first."," "]})]})]})},I=function(){var e=Object(s.useContext)(O.a),t=Object(p.g)().username,a=Object(s.useState)(!0),n=Object(u.a)(a,2),r=n[0],c=n[1],o=Object(s.useState)([]),m=Object(u.a)(o,2),h=m[0],b=m[1];return Object(s.useEffect)((function(){var e=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.get("/profile/".concat(t,"/following"),{cancelToken:e.token});case 3:s=a.sent,b(s.data),c(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.cancel()}}),[t]),r?Object(v.jsx)(q.a,{}):Object(v.jsxs)("div",{className:"list-group",children:[h.length>0&&h.map((function(e,t){return Object(v.jsxs)(d.b,{to:"/profile/".concat(e.username),className:"list-group-item list-group-item-action",children:[Object(v.jsx)("img",{alt:"avatar",className:"avatar-tiny",src:e.avatar})," ",e.username]},t)})),0===h.length&&e.user.username===t&&Object(v.jsx)("p",{className:"lead text-muted text-center",children:"You aren\u2019t following anyone yet."}),0===h.length&&e.user.username!==t&&Object(v.jsxs)("p",{className:"lead text-muted text-center",children:[t," isn\u2019t following anyone yet."]})]})},U=function(){var e=Object(p.g)().username,t=Object(s.useContext)(O.a),a=Object(m.a)({followActionLoading:!1,startFollowingRequestCount:0,stopFollowingRequestCount:0,profileData:{profileUsername:"...",profileAvatar:"https://gravatar.com/avatar/placeholder?s=128",isFollowing:!1,counts:{postCount:"",followerCount:"",followingCount:""}}}),n=Object(u.a)(a,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){var a=j.a.CancelToken.source();function s(){return(s=Object(i.a)(l.a.mark((function s(){var n;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,j.a.post("/profile/".concat(e),{token:t.user.token},{cancelToken:a.token});case 3:n=s.sent,c((function(e){e.profileData=n.data})),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("There was a problem.");case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){a.cancel()}}),[e]),Object(s.useEffect)((function(){if(r.startFollowingRequestCount){c((function(e){e.followActionLoading=!0}));var e=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.post("/addFollow/".concat(r.profileData.profileUsername),{token:t.user.token},{cancelToken:e.token});case 3:c((function(e){e.profileData.isFollowing=!0,e.profileData.counts.followerCount++,e.followActionLoading=!1})),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("There was a problem.");case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.cancel()}}}),[r.startFollowingRequestCount]),Object(s.useEffect)((function(){if(r.stopFollowingRequestCount){c((function(e){e.followActionLoading=!0}));var e=j.a.CancelToken.source();function a(){return(a=Object(i.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.post("/removeFollow/".concat(r.profileData.profileUsername),{token:t.user.token},{cancelToken:e.token});case 3:c((function(e){e.profileData.isFollowing=!1,e.profileData.counts.followerCount--,e.followActionLoading=!1})),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("There was a problem.");case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.cancel()}}}),[r.stopFollowingRequestCount]),Object(v.jsxs)(f.a,{title:"Profile Screen",children:[Object(v.jsxs)("h2",{children:[Object(v.jsx)("img",{alt:"avatar",className:"avatar-small",src:r.profileData.profileAvatar})," ",r.profileData.profileUsername,t.loggedIn&&!r.profileData.isFollowing&&t.user.username!==r.profileData.profileUsername&&"..."!==r.profileData.profileUsername&&Object(v.jsxs)("button",{onClick:function(){c((function(e){e.startFollowingRequestCount++}))},disabled:r.followActionLoading,className:"btn btn-primary btn-sm ml-2",children:["Follow ",Object(v.jsx)(C.a,{width:24,height:24,fill:"currentColor"})]}),t.loggedIn&&r.profileData.isFollowing&&t.user.username!==r.profileData.profileUsername&&"..."!==r.profileData.profileUsername&&Object(v.jsxs)("button",{onClick:function(){c((function(e){e.stopFollowingRequestCount++}))},disabled:r.followActionLoading,className:"btn btn-danger btn-sm ml-2",children:["Stop Following"," ",Object(v.jsx)(C.f,{width:24,height:24,fill:"currentColor"})]})]}),Object(v.jsxs)("div",{className:"profile-nav nav nav-tabs pt-2 mb-4",children:[Object(v.jsxs)(d.c,{to:"/profile/".concat(r.profileData.profileUsername),className:"active nav-item nav-link",children:["Posts:"," ",void 0!==r.profileData.counts&&r.profileData.counts.postCount]}),Object(v.jsxs)(d.c,{to:"/profile/".concat(r.profileData.profileUsername,"/followers"),className:"nav-item nav-link",children:["Followers:"," ",void 0!==r.profileData.counts&&r.profileData.counts.followerCount]}),Object(v.jsxs)(d.c,{to:"/profile/".concat(r.profileData.profileUsername,"/following"),className:"nav-item nav-link",children:["Following:"," ",void 0!==r.profileData.counts&&r.profileData.counts.followingCount]})]}),Object(v.jsxs)(p.c,{children:[Object(v.jsx)(p.a,{path:"",element:Object(v.jsx)(z,{})}),Object(v.jsx)(p.a,{path:"/followers",element:Object(v.jsx)(D,{})}),Object(v.jsx)(p.a,{path:"/following",element:Object(v.jsx)(I,{})})]})]})},A=a(23),R=function(){var e=Object(s.useContext)(O.a),t=Object(s.useContext)(y.a),a=new p.f,n={title:{value:"",hasErrors:!1,message:""},body:{value:"",hasErrors:!1,message:""},isFetching:!0,isSaving:!1,id:Object(p.g)().id,sendCount:0,notFound:!1};var r=Object(m.b)((function(e,t){switch(t.type){case"fetchComplete":return e.title.value=t.value.title,e.body.value=t.value.body,void(e.isFetching=!1);case"titleChange":return e.title.hasErrors=!1,void(e.title.value=t.value);case"bodyChange":return e.body.hasErrors=!1,void(e.body.value=t.value);case"submitRequest":return void(e.title.hasErrors||e.body.hasErrors||e.sendCount++);case"saveRequestStarted":return void(e.isSaving=!0);case"saveRequestFinished":return void(e.isSaving=!1);case"titleRules":return void(t.value.trim()||(e.title.hasErrors=!0,e.title.message="You must provide a title."));case"bodyRules":return void(t.value.trim()||(e.body.hasErrors=!0,e.body.message="You must provide body content."));case"notFound":return void(e.notFound=!0);default:return}}),n),c=Object(u.a)(r,2),o=c[0],h=c[1];return Object(s.useEffect)((function(){var s=j.a.CancelToken.source();function n(){return(n=Object(i.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.a.get("/post/".concat(o.id),{cancelToken:s.token});case 3:(r=n.sent).data?(h({type:"fetchComplete",value:r.data}),e.user.username!==r.data.author.username&&(t({type:"flashMessage",value:"You do not have permission to edit that post."}),a("/"))):h({type:"notFound"}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){s.cancel()}}),[]),Object(s.useEffect)((function(){if(o.sendCount){h({type:"saveRequestStarted"});var a=j.a.CancelToken.source();function s(){return(s=Object(i.a)(l.a.mark((function s(){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,j.a.post("/post/".concat(o.id,"/edit"),{title:o.title.value,body:o.body.value,token:e.user.token},{cancelToken:a.token});case 3:h({type:"saveRequestFinished"}),t({type:"flashMessage",value:"Post was updated."}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){a.cancel()}}}),[o.sendCount]),o.notFound?Object(v.jsx)(A.a,{}):o.isFetching?Object(v.jsx)(f.a,{title:"...",children:Object(v.jsx)(q.a,{})}):Object(v.jsxs)(f.a,{title:"Edit Post",children:[Object(v.jsx)(d.b,{className:"small font-weight-bold",to:"/post/".concat(o.id),children:"\xab Back to post permalink"}),Object(v.jsxs)("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),h({type:"titleRules",value:o.title.value}),h({type:"bodyRules",value:o.body.value}),h({type:"submitRequest"})},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"post-title",className:"text-muted mb-1",children:Object(v.jsx)("small",{children:"Title"})}),Object(v.jsx)("input",{onBlur:function(e){return h({type:"titleRules",value:e.target.value})},onChange:function(e){return h({type:"titleChange",value:e.target.value})},value:o.title.value,autoFocus:!0,name:"title",id:"post-title",className:"form-control form-control-lg form-control-title",type:"text",placeholder:"",autoComplete:"off"}),o.title.hasErrors&&Object(v.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:o.title.message})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"post-body",className:"text-muted mb-1 d-block",children:Object(v.jsx)("small",{children:"Body Content"})}),Object(v.jsx)("textarea",{onBlur:function(e){return h({type:"bodyRules",value:e.target.value})},onChange:function(e){return h({type:"bodyChange",value:e.target.value})},name:"body",id:"post-body",className:"body-content tall-textarea form-control",type:"text",value:o.body.value}),o.body.hasErrors&&Object(v.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:o.body.message})]}),Object(v.jsx)("button",{className:"btn btn-primary",disabled:o.isSaving,children:"Save Updates"})]})]})},H=function(){return Object(v.jsxs)(f.a,{title:"Terms and Conditions",children:[Object(v.jsx)("h2",{children:"Our Terms & Conditions"}),Object(v.jsx)("p",{className:"lead text-muted",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt doloremque?"}),Object(v.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum, est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos adipisci? Totam atque officia quis voluptates sed veniam?"}),Object(v.jsx)("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id nobis provident quo dolorum sapiente temporibus facere non repellendus consequatur cupiditate!"}),Object(v.jsx)("h3",{children:"Details"}),Object(v.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae laboriosam distinctio atque sint earum? Temporibus, voluptas aspernatur aliquam nisi sed harum laborum, nemo odio animi officia quisquam. Veniam, natus reprehenderit."})]})},L=n.a.lazy((function(){return a.e(6).then(a.bind(null,114))})),V=n.a.lazy((function(){return Promise.all([a.e(4),a.e(8)]).then(a.bind(null,115))})),P=n.a.lazy((function(){return a.e(7).then(a.bind(null,116))})),B=n.a.lazy((function(){return Promise.all([a.e(3),a.e(5)]).then(a.bind(null,117))}));j.a.defaults.baseURL="https://reactpracticebackend.herokuapp.com/";var Y=function(){var e={loggedIn:Boolean(localStorage.getItem("socialappToken")),flashMessages:[],user:{token:localStorage.getItem("socialappToken"),username:localStorage.getItem("socialappUsername"),avatar:localStorage.getItem("socialappAvatar")},isSearchOpen:!1,isChatOpen:!1,unreadChatCount:0};var t=Object(m.b)((function(e,t){switch(t.type){case"login":return e.loggedIn=!0,void(e.user=t.data);case"logout":return void(e.loggedIn=!1);case"flashMessage":return void e.flashMessages.push(t.value);case"openSearch":return void(e.isSearchOpen=!0);case"closeSearch":return void(e.isSearchOpen=!1);case"toggleChat":return void(e.isChatOpen=!e.isChatOpen);case"closeChat":return void(e.isChatOpen=!1);case"incrementUnreadChatCount":return void e.unreadChatCount++;case"clearUnreadChatCount":return void(e.unreadChatCount=0);default:return}}),e),a=Object(u.a)(t,2),r=a[0],c=a[1];Object(s.useEffect)((function(){r.loggedIn?(localStorage.setItem("socialappToken",r.user.token),localStorage.setItem("socialappUsername",r.user.username),localStorage.setItem("socialappAvatar",r.user.avatar)):(localStorage.removeItem("socialappToken"),localStorage.removeItem("socialappUsername"),localStorage.removeItem("socialappAvatar"))}),[r.loggedIn]),Object(s.useEffect)((function(){if(r.loggedIn){var e=j.a.CancelToken.source();function t(){return(t=Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.post("/checkToken",{token:r.user.token},{cancelToken:e.token});case 3:t.sent.data||(c({type:"logout"}),c({type:"flashMessage",value:"Your session has expired. Please log in again."})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.cancel()}}}),[]);var o=n.a.useRef(null);return Object(v.jsx)(O.a.Provider,{value:r,children:Object(v.jsx)(y.a.Provider,{value:c,children:Object(v.jsxs)(d.a,{children:[Object(v.jsx)(T,{}),Object(v.jsx)(M,{messages:r.flashMessages}),Object(v.jsx)(s.Suspense,{fallback:Object(v.jsx)(q.a,{}),children:Object(v.jsxs)(p.c,{children:[Object(v.jsx)(p.a,{path:"/",element:r.loggedIn?Object(v.jsx)(S,{}):Object(v.jsx)(E,{})}),Object(v.jsx)(p.a,{path:"/profile/:username/*",element:Object(v.jsx)(U,{})}),Object(v.jsx)(p.a,{path:"/about-us",element:Object(v.jsx)(x,{})}),Object(v.jsx)(p.a,{path:"/create-post",element:Object(v.jsx)(L,{})}),Object(v.jsx)(p.a,{path:"/post/:id",element:Object(v.jsx)(V,{})}),Object(v.jsx)(p.a,{path:"/post/:id/edit",element:Object(v.jsx)(R,{})}),Object(v.jsx)(p.a,{path:"/terms",element:Object(v.jsx)(H,{})}),Object(v.jsx)(p.a,{element:Object(v.jsx)(A.a,{})})]})}),Object(v.jsx)(b.a,{nodeRef:o,timeout:330,in:r.isSearchOpen,classNames:"search-overlay",unmountOnExit:!0,children:Object(v.jsx)("div",{ref:o,className:"search-overlay",children:Object(v.jsx)(s.Suspense,{fallback:"",children:Object(v.jsx)(P,{})})})}),Object(v.jsx)(s.Suspense,{fallback:"",children:r.loggedIn&&Object(v.jsx)(B,{})}),Object(v.jsx)(g,{})]})})})},W=function(e){e&&e instanceof Function&&a.e(9).then(a.bind(null,118)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),W()},9:function(e,t,a){"use strict";var s=a(1),n=Object(s.createContext)();t.a=n}},[[70,1,2]]]);
//# sourceMappingURL=main.d7a5f8a7.chunk.js.map