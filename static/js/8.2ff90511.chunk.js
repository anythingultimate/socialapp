(this["webpackJsonpreact-practice"]=this["webpackJsonpreact-practice"]||[]).push([[8],{115:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a.n(c),s=a(8),r=a(6),o=a(10),l=a(3),i=a(7),u=a(1),d=a(5),j=a.n(d),h=a(14),p=a(109),b=a(17),f=a(9),x=a(15),m=a(23),O=a(24),w=a(0);t.default=function(){var e=Object(l.g)().id,t=Object(u.useState)(!0),a=Object(r.a)(t,2),c=a[0],d=a[1],v=Object(u.useState)(),g=Object(r.a)(v,2),y=g[0],k=g[1],N=Object(u.useContext)(f.a),C=Object(u.useContext)(x.a),D=new l.f;if(Object(u.useEffect)((function(){var t=j.a.CancelToken.source();function a(){return(a=Object(s.a)(n.a.mark((function a(){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.get("/post/".concat(e),{cancelToken:t.token});case 3:c=a.sent,k(c.data),d(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem or the request was cancelled.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){t.cancel()}}),[]),!c&&!y)return Object(w.jsx)(m.a,{});if(c)return Object(w.jsx)(o.a,{title:"...",children:Object(w.jsx)(h.a,{})});var T=new Date(y.createdDate),E="".concat(T.getMonth()+1,"/").concat(T.getDate(),"/").concat(T.getFullYear());function S(){return(S=Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you really want to delete this post?")){t.next=12;break}return t.prev=2,t.next=5,j.a.delete("/post/".concat(e),{data:{token:N.user.token}});case 5:"Success"===t.sent.data&&(C({type:"flashMessage",value:"Post was successfully deleted."}),D("/profile/".concat(N.user.username))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("There was a problem.");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return Object(w.jsxs)(o.a,{title:y.title,children:[Object(w.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(w.jsx)("h2",{children:y.title}),!!N.loggedIn&&N.user.username===y.author.username&&Object(w.jsxs)("span",{className:"pt-2",children:[Object(w.jsx)(i.b,{to:"/post/".concat(y._id,"/edit"),"data-tip":"Edit","data-for":"edit",className:"text-primary me-2",children:Object(w.jsx)(b.e,{width:30,height:30,fill:"currentColor"})}),Object(w.jsx)(O.a,{id:"edit",className:"custom-tooltip"})," ",Object(w.jsx)("span",{onClick:function(){return S.apply(this,arguments)},"data-tip":"Delete","data-for":"delete",className:"delete-post-button text-danger",children:Object(w.jsx)(b.d,{width:30,height:30,fill:"red"})}),Object(w.jsx)(O.a,{id:"delete",className:"custom-tooltip"})]})]}),Object(w.jsxs)("p",{className:"text-muted small mb-4",children:[Object(w.jsx)(i.b,{to:"/profile/".concat(y.author.username),children:Object(w.jsx)("img",{alt:"avatar",className:"avatar-tiny",src:y.author.avatar})}),"Posted by"," ",Object(w.jsx)(i.b,{to:"/profile/".concat(y.author.username),children:y.author.username})," ","on ",E]}),Object(w.jsx)("div",{className:"body-content",children:Object(w.jsx)(p.a,{children:y.body,allowedElements:["p","em","strong","h1","h2","h3","h4","h5","h6","ul","ol","li","a"]})})]})}}}]);
//# sourceMappingURL=8.2ff90511.chunk.js.map