{"version":3,"sources":["components/CreatePost.jsx"],"names":["CreatePost","useState","title","setTitle","body","setBody","wasSuccessful","setWasSuccessful","navigate","useNavigate","appDispatch","useContext","DispatchContext","appState","StateContext","e","a","preventDefault","axios","post","token","user","response","data","console","log","useEffect","type","value","onSubmit","className","htmlFor","onChange","target","autoFocus","name","id","placeholder","autoComplete"],"mappings":"6NAkFeA,UA1EI,WAAO,IAAD,EACGC,qBADH,mBAChBC,EADgB,KACTC,EADS,OAECF,qBAFD,mBAEhBG,EAFgB,KAEVC,EAFU,OAGmBJ,oBAAS,GAH5B,mBAGhBK,EAHgB,KAGDC,EAHC,KAInBC,EAAWC,cACTC,EAAcC,qBAAWC,KACzBC,EAAWF,qBAAWG,KANL,4CAQvB,WAA4BC,GAA5B,eAAAC,EAAA,6DACED,EAAEE,iBADJ,kBAG2BC,IAAMC,KAAK,eAAgB,CAChDjB,QACAE,OACAgB,MAAOP,EAASQ,KAAKD,QAN3B,OAGUE,EAHV,OAQIf,EAAiBe,EAASC,MAE1BC,QAAQC,IAAI,yBAVhB,gDAYID,QAAQC,IAAI,wBAZhB,0DARuB,sBAqCvB,OAbAC,qBAAU,WAQR,OAPIpB,IACFI,EAAY,CACViB,KAAM,eACNC,MAAO,sCAETpB,EAAS,SAAD,OAAUF,KAEb,WACLkB,QAAQC,IAAI,cAEb,CAACnB,IAGF,cAAC,IAAD,CAAMJ,MAAM,kBAAZ,SACE,uBAAM2B,SAvCa,4CAuCnB,UACE,sBAAKC,UAAU,aAAf,UACE,uBAAOC,QAAQ,aAAaD,UAAU,kBAAtC,SACE,4CAEF,uBACEE,SAAU,SAACjB,GAAD,OAAOZ,EAASY,EAAEkB,OAAOL,QACnCM,WAAS,EACTC,KAAK,QACLC,GAAG,aACHN,UAAU,kDACVH,KAAK,OACLU,YAAY,GACZC,aAAa,WAIjB,sBAAKR,UAAU,aAAf,UACE,uBAAOC,QAAQ,YAAYD,UAAU,0BAArC,SACE,mDAEF,0BACEE,SAAU,SAACjB,GAAD,OAAOV,EAAQU,EAAEkB,OAAOL,QAClCO,KAAK,OACLC,GAAG,YACHN,UAAU,0CACVH,KAAK,YAIT,wBAAQG,UAAU,kBAAlB","file":"static/js/6.aa60383a.chunk.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport axios from \"axios\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport DispatchContext from \"../DispatchContext\";\nimport StateContext from \"../StateContext\";\nimport Page from \"./ui/container/Page\";\n\nconst CreatePost = () => {\n  const [title, setTitle] = useState();\n  const [body, setBody] = useState();\n  const [wasSuccessful, setWasSuccessful] = useState(false);\n  let navigate = useNavigate();\n  const appDispatch = useContext(DispatchContext);\n  const appState = useContext(StateContext);\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"/create-post\", {\n        title,\n        body,\n        token: appState.user.token,\n      });\n      setWasSuccessful(response.data);\n\n      console.log(\"New post was created.\");\n    } catch (e) {\n      console.log(\"There was a problem.\");\n    }\n  }\n\n  useEffect(() => {\n    if (wasSuccessful) {\n      appDispatch({\n        type: \"flashMessage\",\n        value: \"Congrats, you created a new post.\",\n      });\n      navigate(`/post/${wasSuccessful}`);\n    }\n    return () => {\n      console.log(\"cleanup\");\n    };\n  }, [wasSuccessful]);\n\n  return (\n    <Page title=\"Create New Post\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"post-title\" className=\"text-muted mb-1\">\n            <small>Title</small>\n          </label>\n          <input\n            onChange={(e) => setTitle(e.target.value)}\n            autoFocus\n            name=\"title\"\n            id=\"post-title\"\n            className=\"form-control form-control-lg form-control-title\"\n            type=\"text\"\n            placeholder=\"\"\n            autoComplete=\"off\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"post-body\" className=\"text-muted mb-1 d-block\">\n            <small>Body Content</small>\n          </label>\n          <textarea\n            onChange={(e) => setBody(e.target.value)}\n            name=\"body\"\n            id=\"post-body\"\n            className=\"body-content tall-textarea form-control\"\n            type=\"text\"\n          ></textarea>\n        </div>\n\n        <button className=\"btn btn-primary\">Save New Post</button>\n      </form>\n    </Page>\n  );\n};\nexport default CreatePost;\n"],"sourceRoot":""}