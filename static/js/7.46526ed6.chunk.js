(this["webpackJsonpreact-practice"]=this["webpackJsonpreact-practice"]||[]).push([[7],{116:function(e,t,r){"use strict";r.r(t);var s=r(4),c=r.n(s),n=r(8),a=r(6),o=r(5),i=r.n(o),l=r(1),u=r(16),h=r(15),d=r(22),f=r(17),j=r(0);t.default=function(){var e=Object(l.useContext)(h.a),t=Object(u.a)({searchTerm:"",results:[],show:"neither",requestCount:0}),r=Object(a.a)(t,2),s=r[0],o=r[1];function m(t){27===t.keyCode&&e({type:"closeSearch"})}return Object(l.useEffect)((function(){return document.addEventListener("keyup",m),function(){return document.removeEventListener("keyup",m)}}),[]),Object(l.useEffect)((function(){if(s.searchTerm.trim()){o((function(e){e.show="loading"}));var e=setTimeout((function(){o((function(e){e.requestCount++}))}),750);return function(){return clearTimeout(e)}}o((function(e){e.show="neither"}))}),[s.searchTerm]),Object(l.useEffect)((function(){if(s.requestCount){var e=i.a.CancelToken.source();function t(){return(t=Object(n.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/search",{searchTerm:s.searchTerm},{cancelToken:e.token});case 3:r=t.sent,o((function(e){e.results=r.data,e.show="results"})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.cancel()}}}),[s.requestCount]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"search-overlay-top shadow-sm",children:Object(j.jsxs)("div",{className:"container container--narrow",children:[Object(j.jsx)("label",{htmlFor:"live-search-field",className:"search-overlay-icon",children:Object(j.jsx)(f.g,{width:60,height:60,fill:"currentColor"})}),Object(j.jsx)("input",{onChange:function(e){var t=e.target.value;o((function(e){e.searchTerm=t}))},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),Object(j.jsx)("span",{onClick:function(){return e({type:"closeSearch"})},className:"close-live-search",children:Object(j.jsx)(f.b,{width:60,height:60,fill:"currentColor"})})]})}),Object(j.jsx)("div",{className:"search-overlay-bottom",children:Object(j.jsxs)("div",{className:"container container--narrow py-3",children:[Object(j.jsx)("div",{className:"circle-loader "+("loading"===s.show?"circle-loader--visible":"")}),Object(j.jsxs)("div",{className:"live-search-results "+("results"===s.show?"live-search-results--visible":""),children:[Boolean(s.results.length)&&Object(j.jsxs)("div",{className:"list-group shadow-sm",children:[Object(j.jsxs)("div",{className:"list-group-item active",children:[Object(j.jsx)("strong",{children:"Search Results"})," (",s.results.length," ",s.results.length>1?"items":"item"," found)"]}),s.results.map((function(t){return Object(j.jsx)(d.a,{post:t,onClick:function(){return e({type:"closeSearch"})}},t._id)}))]}),!Boolean(s.results.length)&&Object(j.jsx)("p",{className:"alert alert-danger text-center shadow-sm",children:"Sorry, we could not find any results for that search."})]})]})})]})}}}]);
//# sourceMappingURL=7.46526ed6.chunk.js.map